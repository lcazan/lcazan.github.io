let toolbarTimer = null; // New global variable to manage the delay

function selectElement(el) {
    if (selectedEl) selectedEl.classList.remove('selected-item');
    selectedEl = el;
    selectedEl.classList.add('selected-item');
    
    // Clear any pending toolbar shows
    clearTimeout(toolbarTimer);
    toolbar.style.display = 'none';

    // Set a 400ms delay to allow keyboard and cursor to initialize
    toolbarTimer = setTimeout(() => {
        updateToolbarPos();
    }, 400); 
}
