<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snoozing Builder | Step 1</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --admin-bg: #1e1e1e;
            --panel-bg: #2d2d2d;
            --brand-pink: #ebd5c9;
            --text-light: #eee;
        }
        body { margin: 0; display: flex; height: 100vh; font-family: 'Source Sans Pro', sans-serif; background: #111; overflow: hidden; }

        /* LEFT CONTROL PANEL */
        #control-panel { width: 350px; background: var(--panel-bg); color: var(--text-light); display: flex; flex-direction: column; border-right: 2px solid #000; }
        .tab-header { padding: 20px; background: #222; border-bottom: 1px solid #444; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: var(--brand-pink); }
        
        .scroll-area { flex-grow: 1; overflow-y: auto; padding: 20px; }
        .tool-section { margin-bottom: 30px; }
        .label { font-size: 10px; color: #888; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: bold; }

        /* DRAGGABLE BLOCKS */
        .drag-item { 
            background: #3d3d3d; border: 1px solid #555; padding: 15px; margin-bottom: 10px; 
            cursor: grab; border-radius: 4px; font-size: 12px; transition: 0.2s;
        }
        .drag-item:hover { border-color: var(--brand-pink); background: #444; }
        .drag-item i { margin-right: 10px; color: var(--brand-pink); }

        /* TEXT EDITOR TOOLBAR */
        .editor-toolbar { display: flex; gap: 5px; margin-top: 15px; padding-top: 15px; border-top: 1px solid #444; }
        .tool-btn { background: #444; border: 1px solid #666; color: #fff; padding: 8px; cursor: pointer; border-radius: 3px; font-size: 12px; }
        .tool-btn:hover { background: var(--brand-pink); color: #000; }

        /* PREVIEW WINDOW */
        #preview-container { flex-grow: 1; background: #555; padding: 40px; display: flex; justify-content: center; overflow-y: auto; }
        #preview-window { 
            width: 100%; max-width: 1000px; background: white; min-height: 100%; 
            box-shadow: 0 0 50px rgba(0,0,0,0.3); position: relative;
        }

        /* DYNAMIC DROPZONE STYLES */
        .drop-target { min-height: 100px; padding: 20px; }
        .drop-placeholder { height: 40px; background: rgba(235, 213, 201, 0.2); border: 2px dashed var(--brand-pink); margin: 10px 0; }
    </style>
</head>
<body>

<div id="control-panel">
    <div class="tab-header">Insert Elements</div>
    <div class="scroll-area">
        <div class="tool-section">
            <span class="label">Text Styles</span>
            <div class="drag-item" draggable="true" ondragstart="drag(event, 'section_heading')">
                <i class="fa-solid fa-font"></i> Section Heading (Brown)
            </div>
            <div class="drag-item" draggable="true" ondragstart="drag(event, 'block_heading')">
                <i class="fa-solid fa-heading"></i> Block Heading (Underlined)
            </div>
            <div class="drag-item" draggable="true" ondragstart="drag(event, 'block_text')">
                <i class="fa-solid fa-align-center"></i> Block Paragraph
            </div>
        </div>

        <div id="formatting-tools" class="tool-section" style="display:none;">
            <span class="label">Alignment & Style</span>
            <div class="editor-toolbar">
                <button class="tool-btn" onclick="execCmd('justifyLeft')"><i class="fa-solid fa-align-left"></i></button>
                <button class="tool-btn" onclick="execCmd('justifyCenter')"><i class="fa-solid fa-align-center"></i></button>
                <button class="tool-btn" onclick="execCmd('justifyFull')"><i class="fa-solid fa-align-justify"></i></button>
                <button class="tool-btn" onclick="execCmd('bold')"><i class="fa-solid fa-bold"></i></button>
                <button class="tool-btn" onclick="execCmd('underline')"><i class="fa-solid fa-underline"></i></button>
            </div>
        </div>
    </div>
</div>

<div id="preview-container">
    <div id="preview-window">
        </div>
</div>

<script>
    // 1. Initial Template Load
    const baseTemplate = `
    <style>
        .section_heading { font-family: 'Source Sans Pro'; font-size: 14px; font-weight: 600; text-transform: uppercase; color: #877267; margin: 40px 0 10px; text-align: left; }
        .block_heading { font-family: 'Cinzel'; font-size: 1.2rem; border-bottom: 1px solid #ebd5c9; padding-bottom: 8px; display: inline-block; margin-bottom: 10px; }
        .block_text { font-family: 'Source Sans Pro'; font-size: 1rem; line-height: 1.8; margin-bottom: 25px; text-align: center; }
        .editable-block { position: relative; transition: 0.2s; cursor: move; }
        .editable-block:hover { outline: 1px dashed #ebd5c9; outline-offset: 5px; }
    </style>
    <div class="content-container drop-target" id="main-dropzone" ondrop="drop(event)" ondragover="allowDrop(event)">
        <p style="color:#ccc; text-align:center; padding-top:50px;">Drag text blocks here...</p>
    </div>`;

    window.onload = () => {
        document.getElementById('preview-window').innerHTML = baseTemplate;
    };

    // 2. Drag and Drop Logic
    function drag(ev, type) {
        ev.dataTransfer.setData("type", type);
    }

    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drop(ev) {
        ev.preventDefault();
        const type = ev.dataTransfer.getData("type");
        if (!type) return;

        const newBlock = document.createElement('div');
        newBlock.className = 'editable-block';
        newBlock.contentEditable = "true";
        newBlock.setAttribute('onclick', 'showTools()');
        
        let content = "";
        if(type === 'section_heading') content = `<div class="section_heading">NEW SECTION</div>`;
        if(type === 'block_heading') content = `<h2 class="block_heading">New Block Title</h2>`;
        if(type === 'block_text') content = `<p class="block_text">Enter your paragraph text here...</p>`;
        
        newBlock.innerHTML = content;
        
        // Remove placeholder text if it's the first item
        const zone = document.getElementById('main-dropzone');
        if(zone.querySelector('p')) zone.innerHTML = "";
        
        zone.appendChild(newBlock);
    }

    // 3. Editing Logic
    function showTools() {
        document.getElementById('formatting-tools').style.display = 'block';
    }

    function execCmd(command) {
        document.execCommand(command, false, null);
    }

    // Drag-to-reorder logic (Step 1.5)
    let dragSrcEl = null;
    document.addEventListener('dragstart', function(e) {
        if (e.target.className === 'editable-block') {
            dragSrcEl = e.target;
            e.dataTransfer.effectAllowed = 'move';
        }
    });
</script>

</body>
</html>
