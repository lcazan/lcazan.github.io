<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Snoozing Baby | Home</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400&family=Source+Sans+Pro:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --brand-cream: #FAF6F3;   
            --icon-brown: #877267; 
            --text-dark: #151515;
            --gallery-gap: 15px; 
        }

        body { font-family: 'Source Sans Pro', sans-serif; margin: 0; background-color: #fff; overflow-x: hidden; }

        /* --- Gallery Layout --- */
        .content-container { max-width: 1000px; margin: 0 auto; padding: 40px 20px; }
        .gallery-columns { display: flex; gap: var(--gallery-gap); }
        .gallery-column { flex: 1; display: flex; flex-direction: column; gap: var(--gallery-gap); }
        .gallery-item { cursor: pointer; background: #f0f0f0; min-height: 100px; transition: opacity 0.3s; }
        .gallery-item img { width: 100%; height: auto; display: block; }

        /* --- Lightbox Modal --- */
        .modal { display: none; position: fixed; z-index: 5000; left: 0; top: 0; width: 100%; height: 100%; background: #000; overflow: hidden; touch-action: none; }
        .slider-track { display: flex; height: 100%; width: 100%; }
        .slide { min-width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; position: relative; }
        
        /* The Container for the Image & Counter - Set to 70% */
        .image-wrapper { 
            position: relative; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            width: 90%; 
            height: 70vh; /* Reduced from 80vh to 70vh per your request */
        }
        
        .slide img { 
            max-width: 100%; 
            max-height: 100%; 
            width: auto; 
            height: auto; 
            border: 2px solid #fff; 
            object-fit: contain; 
            display: block;
            opacity: 0; 
            transition: opacity 0.3s ease;
        }

        .slide img.loaded { opacity: 1; }

        .counter { 
            position: absolute; 
            bottom: calc(100% + 15px); 
            color: #fff; 
            font-size: 14px; 
            letter-spacing: 2px; 
            font-weight: 600; 
        }
        
        .close-modal { position: absolute; top: 20px; right: 25px; color: #fff; font-size: 40px; cursor: pointer; z-index: 7000; }
        
        .nav-btn { display: none; position: absolute; top: 50%; transform: translateY(-50%); color: #fff; background: rgba(50,50,50,0.7); border: 1px solid #fff; font-size: 24px; cursor: pointer; z-index: 7000; width: 50px; height: 50px; border-radius: 50%; align-items: center; justify-content: center; }
        .prev-btn { left: 20px; }
        .next-btn { right: 20px; }

        @media (min-width: 1024px) { .nav-btn { display: flex; } }
        
        .loader { width: 30px; height: 30px; border: 3px solid #333; border-top-color: #fff; border-radius: 50%; animation: spin 1s infinite linear; position: absolute; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="content-container">
    <div class="gallery-columns">
        <div id="col-left" class="gallery-column"></div>
        <div id="col-right" class="gallery-column"></div>
    </div>
</div>

<div id="imageModal" class="modal">
    <span class="close-modal" onclick="closeModal()">&times;</span>
    <button class="nav-btn prev-btn" onclick="moveSlide(-1, event)"><i class="fas fa-chevron-left"></i></button>
    <div id="sliderTrack" class="slider-track"></div>
    <button class="nav-btn next-btn" onclick="moveSlide(1, event)"><i class="fas fa-chevron-right"></i></button>
</div>

<script>
    const imageList = ["1.jpeg", "2.jpeg", "3.jpeg", "4.jpeg", "5.jpeg", "6.jpeg", "7.jpeg", "8.jpeg", "9.jpeg", "10.jpeg", "11.jpeg", "12.jpeg", "13.jpeg", "14.jpeg", "15.jpeg", "16.jpeg", "17.jpeg"];
    let currentIndex = 0;
    let startX = 0, currentTranslate = 0, prevTranslate = 0, isDragging = false;

    function renderGallery() {
        const left = document.getElementById('col-left'), right = document.getElementById('col-right'), track = document.getElementById('sliderTrack');
        
        imageList.forEach((img, index) => {
            const itemHtml = `<div class="gallery-item" onclick="openModal(${index})"><img src="${img}" loading="lazy"></div>`;
            index % 2 === 0 ? left.innerHTML += itemHtml : right.innerHTML += itemHtml;
            
            const slide = document.createElement('div'); 
            slide.className = 'slide'; 
            slide.innerHTML = `
                <div class="image-wrapper" data-index="${index}">
                    <div class="counter">${index + 1} / ${imageList.length}</div>
                    <div class="loader"></div>
                    <img data-src="${img}" alt="Baby Image ${index + 1}">
                </div>`;
            track.appendChild(slide);
        });
    }

    function loadImage(index) {
        const slide = document.querySelector(`.image-wrapper[data-index="${index}"]`);
        if (!slide) return;
        const img = slide.querySelector('img');
        const loader = slide.querySelector('.loader');
        
        if (img && img.dataset.src) {
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
            img.onload = () => {
                img.classList.add('loaded');
                if (loader) loader.style.display = 'none';
            };
        }
    }

    function openModal(index) {
        currentIndex = index;
        const modal = document.getElementById('imageModal');
        const track = document.getElementById('sliderTrack');
        
        track.style.transition = 'none'; 
        modal.style.display = "block";
        
        const width = modal.offsetWidth;
        currentTranslate = currentIndex * -width;
        prevTranslate = currentTranslate;
        track.style.transform = `translateX(${currentTranslate}px)`;
        
        document.body.style.overflow = "hidden";
        
        // Predictively load the current and neighboring images
        loadImage(currentIndex);
        loadImage(currentIndex + 1);
        loadImage(currentIndex - 1);
    }

    function moveSlide(step, e) {
        if(e) e.stopPropagation();
        const track = document.getElementById('sliderTrack');
        const width = document.getElementById('imageModal').offsetWidth;
        
        // Dynamic duration for smooth speed parity
        const duration = Math.min(0.4, Math.max(0.2, (width / 2000) * 0.5));
        track.style.transition = `transform ${duration}s cubic-bezier(0.25, 0.46, 0.45, 0.94)`;
        
        currentIndex = Math.max(0, Math.min(currentIndex + step, imageList.length - 1));
        currentTranslate = currentIndex * -width;
        prevTranslate = currentTranslate;
        track.style.transform = `translateX(${currentTranslate}px)`;
        
        loadImage(currentIndex);
        loadImage(currentIndex + 1);
        loadImage(currentIndex - 1);
    }

    function closeModal() {
        document.getElementById('imageModal').style.display = "none";
        document.body.style.overflow = "auto";
    }

    window.addEventListener("orientationchange", () => { 
        if (document.getElementById('imageModal').style.display === "block") closeModal(); 
    });

    const modal = document.getElementById('imageModal'), track = document.getElementById('sliderTrack');
    modal.addEventListener('touchstart', e => { isDragging = true; startX = e.touches[0].clientX; track.style.transition = 'none'; });
    modal.addEventListener('touchmove', e => { if (!isDragging) return; const diff = e.touches[0].clientX - startX; track.style.transform = `translateX(${prevTranslate + diff}px)`; });
    modal.addEventListener('touchend', e => { 
        isDragging = false; const diff = e.changedTouches[0].clientX - startX;
        if (diff < -50) moveSlide(1); else if (diff > 50) moveSlide(-1); else moveSlide(0);
    });

    window.addEventListener('load', renderGallery);
</script>

</body>
</html>
